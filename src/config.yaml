# Konfiguracja systemu strojenia regulatorów PID
# Parametry mogą być nadpisane per model używając kluczy: zbiornik_1rz, dwa_zbiorniki, wahadlo_odwrocone

# Zakresy parametrów dla strojenia
zakresy_parametrow:
  default:
    Kp: [0.5, 10.0]    # Realistyczne dla systemów przemysłowych
    Ti: [5.0, 40.0]    # Typowy zakres całkowania
    Td: [0.1, 8.0]     # Typowy zakres różniczkowania
  
  # Specyficzne dla modeli (opcjonalne nadpisanie)
  zbiornik_1rz:
    Kp: [0.5, 10.0]    # Zbiornik potrzebuje umiarkowanego wzmocnienia
    Ti: [5.0, 40.0]    # Wolniejsza akcja całkująca dla zbiornika
    Td: [0.1, 8.0]     # Ograniczona akcja różniczkująca
  
  dwa_zbiorniki:
    Kp: [1.0, 12.0]    # Nieco wyższe wzmocnienie dla złożonego systemu
    Ti: [8.0, 50.0]    # Wolniejsza akcja całkująca dla układu 2. rzędu
    Td: [0.1, 6.0]     # Ostrożna akcja różniczkująca
  
  wahadlo_odwrocone:
    Kp: [2.0, 25.0]    # Wyższe wzmocnienie dla niestabilnego układu
    Ti: [2.0, 30.0]    # Szybsza akcja całkująca dla stabilizacji
    Td: [0.1, 8.0]     # Akcja różniczkująca pomaga w stabilizacji

# Wagi funkcji kary (kara = IAE + waga_Mp*Mp + waga_ts*ts + waga_stale_u jeśli u stałe)
wagi_kary:
  przeregulowanie: 0.5      # Zbalansowana kara za przeregulowanie
  czas_ustalania: 1.0       # Silna kara za wolne ustalanie - priorytet dla dynamiki
  sterowanie_stale: 1000    # Kara jeśli sterowanie stałe (std(u) < 1e-4)
  parametry_ekstremalne: 50 # Kara za parametry zbliżone do granic zakresu

# Gęstość siatki dla przeszukiwania
gestosc_siatki:
  regulator_p:
    Kp: 25        # 25 punktów
  
  regulator_pi:
    Kp: 20        # 20 × 15 = 300 kombinacji
    Ti: 15
  
  regulator_pd:
    Kp: 20        # 20 × 15 = 300 kombinacji
    Td: 15
  
  regulator_pid:
    Kp: 15        # 15 × 12 × 12 = 2160 kombinacji (zamiast 2880)
    Ti: 12
    Td: 12

# Adaptacyjne zagęszczanie siatki
adaptacyjne_przeszukiwanie:
  enabled: true
  faza_gruba:
    gestosc_mnoznik: 0.3    # 30% pierwotnej gęstości dla fazy grubej
  faza_dokladna:
    margines_procent: 0.2   # zagęść ±20% zakresu wokół optimum z fazy grubej
    gestosc_mnoznik: 1.5    # 150% pierwotnej gęstości dla fazy dokładnej

# Optymalizacja numeryczna
optymalizacja:
  punkty_startowe:
    uzyj_ziegler_nichols: true    # użyj wyniku ZN jako punktu startowego
    liczba_multi_start: 3          # dodatkowe losowe punkty startowe
    metoda: 'L-BFGS-B'
    maxiter: 500

# Równoległe wykonywanie
rownolegle:
  enabled: true
  n_jobs: -1    # -1 = użyj wszystkich dostępnych rdzeni

# Logowanie
logowanie:
  poziom: 'INFO'          # DEBUG, INFO, WARNING, ERROR
  plik_log: 'wyniki/strojenie.log'
  loguj_niepowodzenia: true

# Walidacja
walidacja:
  scenariusze:
    - nazwa: "Skok wartości zadanej (mały)"
      typ: "setpoint_step"
      wielkosc: 5.0
      czas_skoku: 10.0
    
    - nazwa: "Skok wartości zadanej (duży)"
      typ: "setpoint_step"
      wielkosc: 10.0          # Zmniejszone z 15.0 - bardziej realistyczne
      czas_skoku: 10.0
    
    - nazwa: "Zakłócenie na wyjściu (ujemne)"
      typ: "output_disturbance"
      wielkosc: -1.5          # Zmniejszone z -3.0 - realistyczne zakłócenie
      czas_zaklócenia: 30.0
    
    - nazwa: "Zakłócenie na wyjściu (dodatnie)"
      typ: "output_disturbance"
      wielkosc: 1.5           # Zmniejszone z 2.0 - realistyczne zakłócenie
      czas_zaklócenia: 30.0
    
    - nazwa: "Szum pomiarowy"
      typ: "measurement_noise"
      odchylenie_std: 0.05    # Zmniejszone z 0.1 - typowy szum pomiarowy
  
  progi_akceptacji:
    IAE_max: 15.0              # Ścisły próg dla dobrej jakości regulacji
    przeregulowanie_max: 40.0  # Akceptowalne przeregulowanie dla systemów dynamicznych
    czas_ustalania_max: 80.0   # Realistyczny czas dla systemów przemysłowych z zakłóceniami

# Raportowanie
raportowanie:
  generuj_raport_porownawczy: true
  format_wykresow: 'png'
  dpi: 150
  pokaz_czas_obliczen: true
